(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),c=n(9),s=n(7),l=n(1),u=n(2),f=n(4),h=n(3),p=n(5),d=n(6),v=n.n(d),E=n(12),m=(n(56),n(57),null),g=null,b=function(){var e=document.createElement("div");return e.className="tool-tip",e},O=function(){return g||(g=document.querySelector("#root"))},y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={left:0,top:0},n.adjustUI=function(){var e=n.props,t=e.y,a=e.target,r=n.refContent,i=r.clientWidth,o=r.clientHeight,c=parseInt(i),s=parseInt(o),l=a.getBoundingClientRect(),u=l.left+l.width/2-c/2,f=Math.max(t+10,l.bottom+10),h=O();u+c>h.clientWidth&&(u=l.left-l.width/2-c,f=l.top-s/2+l.height/2),f+s>h.clientHeight&&(f=l.top-l.height/2-s),n.setState({left:u,top:f})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.adjustUI()}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.state,a=n.left,i=n.top;return r.a.createElement("div",{className:"content",ref:function(t){return e.refContent=t},style:{left:a,top:i}},t)}}]),t}(a.PureComponent),T=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).handleMouseEnter=function(e){var t=e.pageX,a=e.pageY,i=e.currentTarget,c=n.props.title;if(!c||""===c)return!1;m||(m=b()),g||(g=O()),g.appendChild(m),o.a.render(r.a.createElement(y,{x:t,y:a,title:c,target:i}),m)},n.handleMouseLeave=function(e){m&&m.isConnected&&g&&(o.a.unmountComponentAtNode(m),g.removeChild(m))},n.handleClick=function(e){var t=n.props,a=t.onClick,r=t.children;a?a(e):"object"===typeof r&&r.props.onClick&&r.props.onClick()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.children;"object"!==typeof e&&(e=r.a.createElement("span",null,e));var t={onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick};return r.a.cloneElement(e,t)}}]),t}(a.PureComponent),k={LIMIT_WORDS:100,CATEGORY_LIST:[{key:"default",value:"\u9ed8\u8ba4"}],STORE_CATEGORY_KEY:"__category",STORE_ACTIVE_CATEGORY_KEY:"__active_category",STORE_TODO_KEY:"__todoList",STORE_DONE_KEY:"__doneList",RENDER_PARSE_KEY:"__parseData",RENDER_ACTIVE_KEY:"__active",RENDER_STRING_KEY:"__string"},C={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,Pause:19,CAPE_LOCK:20,ESC:27,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,SELECT:41,PRINT:42,EXECUTE:43,UNDEFINED:44,INSERT:45,DELETE:46,Help:47,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META_LEFT:91,META_RIGHT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145,EQUAL:187,PERIOD:188,MINUS:189,COMMA:190,LEFT_PARENTHESIS:219,RIGHT_PARENTHESIS:221},N=window.localStorage,j=k.STORE_CATEGORY_KEY,D=":d",A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).onClick=function(e){n.props.onChange(e)},n.onKeyDown=function(e){if(e.nativeEvent.keyCode===C.ENTER){var t=n.state.focusKey;n.onBlur(t)}},n.onFocus=function(e,t,a){n._preValue=t,n.setState({focusKey:e,focusValue:t,focusIndex:a})},n.deleteOption=function(e){var t=n.state.options;t.splice(e,1),n.setState({options:Object(c.a)(t)}),N.setItem(j,JSON.stringify(t))},n.onBlur=function(e){var t=n.state,a=t.focusIndex,r=t.focusKey,i=t.focusValue,o=t.options;e===r&&n.setState({focusIndex:-1,focusValue:"",focusKey:null});var c=o[a];return i?i===D?(n.deleteOption(a),!1):(!0===c.isNew?c={key:i,value:i}:c.value=i,o[a]=c,N.setItem(j,JSON.stringify(o)),void n.props.onChange(c.key)):(c&&!0===c.isNew&&n.deleteOption(a),!1)},n.onValueChange=function(e){n.setState({focusValue:e.target.value})},n.addEmptyCategory=function(){var e=n.state.options,t=Object(c.a)(e),a=""+Math.random(),r={key:a,value:"",isNew:!0};t.push(r),n.setState({focusIndex:e.length,focusKey:a,options:t})},n.state={focusIndex:-1,focusKey:null,options:e.options,focusValue:""},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&this.setState({options:e.options})}},{key:"_renderEachCategory",value:function(e,t,n){var a=this,i=this.state,o=i.focusKey,c=i.focusValue,s=this.props.activeKey,l=e===o;return r.a.createElement("li",{key:e,className:v()({"is-active":e===s,"is-focus":l}),onDoubleClick:function(){a.onFocus(e,t,n)},onClick:function(){a.onClick(e)}},l?r.a.createElement("input",{autoFocus:!0,className:"category-input",value:c,onBlur:function(){a.onBlur(e)},onKeyPress:this.onKeyDown,onChange:this.onValueChange}):r.a.createElement(T,{title:t},r.a.createElement("span",null,t)))}},{key:"render",value:function(){var e=this,t=this.state.options;return r.a.createElement("div",{className:"todo-category"},r.a.createElement("ul",null,t.map(function(t,n){var a=t.key,r=t.value;return e._renderEachCategory(a,r,n)}),r.a.createElement("li",{className:"add-category",onClick:this.addEmptyCategory},r.a.createElement(T,{title:"\u6dfb\u52a0\u5206\u7c7b"},r.a.createElement("i",{className:"iconfont icon-plus"})))))}}]),t}(a.PureComponent),_={TYPE:{TIP:"tip"},stop:function(e){e.stopPropagation(),e.preventDefault()},dispatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=document.createEvent("CustomEvent");r.initCustomEvent(e,n,a,t),window.dispatchEvent(r)}},I=(n(58),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={tip:"",active:!1},n._showTip=function(e){var t=n.props.duration,a=e.detail,r=a.tip,i=a.timeout;n.tipsTimout&&(clearTimeout(n.tipsTimout),n.tipsTimout=null),n.setState({tip:r,active:!0}),n.tipsTimout=setTimeout(function(){n.setState({active:!1})},i||t||2e3)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener(_.TYPE.TIP,this._showTip)}},{key:"componentWillUnmount",value:function(){window.addEventListener(_.TYPE.TIP,this._showTip)}},{key:"render",value:function(){var e=this.state,t=e.tip,n=e.active;return t?r.a.createElement("div",{className:v()("tips",{"is-active":n})},"".concat(t)):null}}],[{key:"getTip",value:function(e,t,n){var a=e.length,r=-1,i=k.RENDER_STRING_KEY;return t.some(function(t,n){return t[i]===e&&(r=n,!0)}),!0!==n&&0===a?{tip:"\u54c8\u54c8\u54c8\uff0c\u5c0f\u54d1\u5df4\uff01"}:-1!==r?{index:r,tip:"\u4f60\u5df2\u7ecf\u8bf4\u8fc7\u5566\uff01\u771f\u5570\u55e6~"}:{tip:""}}}]),t}(a.PureComponent));I.showTip=function(e,t){_.dispatch(_.TYPE.TIP,{tip:e,timeout:t})};n(59);var R="good",S="ok",w="busy",P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.length,n=e.isActive,a=e.onClick,i=e.onMouseEnter,o=e.onMouseLeave,c=t<=2?R:t<=5?S:w;return r.a.createElement("div",{className:v()("status",c,{"is-active":n}),onMouseEnter:i,onMouseLeave:o,onClick:a})}}]),t}(a.PureComponent),L=(n(60),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){n.props.onClick(e)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.className;return r.a.createElement("button",{className:v()("cross","close-btn",e),onClick:this.onClick})}}]),t}(a.PureComponent)),M=n(45),K=(n(61),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).toggleChecked=function(){var e=n.props,t=e.onChange,a=e.checked;t&&t(!a)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.small;return r.a.createElement("div",{className:v()("checkbox",{checked:t,small:n}),onClick:this.toggleChecked})}}]),t}(a.PureComponent));n(62);var x=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.data,a=t.disabled,r=t.onActive;if(n&&r&&!a){var i=n.data,o=Date.now(),c=i.timeStamp-o;c<=0?this.notify():this.timeoutKey=setTimeout(function(){e.notify()},c)}}},{key:"componentWillUnmount",value:function(){this.timeoutKey&&clearTimeout(this.timeoutKey)}},{key:"notify",value:function(){var e,t,n=this.props,a=n.index,r=n.data,i=n.onActive;e="\u4eb2\uff0c\u4f60\u8fd8\u6709\u4e8b\u4ef6\u6ca1\u505a\u54e6",t=r[k.RENDER_STRING_KEY],console.log("\u901a\u77e5\uff1a",e,t),new Notification(e,{body:t}),i(a)}},{key:"formatTime",value:function(e){return e.toLocaleString()}},{key:"render",value:function(){var e=this.props.data.data,t=this.formatTime(e);return r.a.createElement("span",{className:"time"},r.a.createElement(T,{title:t},r.a.createElement("i",{className:"iconfont icon-time-circle"})))}}]),t}(a.Component),U=(n(63),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onDoubleClick=function(e){(0,n.props.onDblClick)(e)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.data;return t&&Array(t.tags)&&0!==t.tags.length?r.a.createElement("span",{className:"tags"},t.tags.map(function(t){return r.a.createElement("span",{className:"tag",key:t,onDoubleClick:function(){e.onDoubleClick(t)}},t)})):null}}]),t}(a.PureComponent)),F=(n(64),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"jumpTo",value:function(e){var t=e;e.startsWith("http")||(t="https://".concat(e)),function(e,t){try{window.require("electron").shell.openExternal(e)}catch(n){try{window.open(e,"_blank")}catch(n){t&&t()}}}(t,function(){I.showTip('"'.concat(e,'" \u4e0d\u662f\u5408\u6cd5Url'))})}},{key:"render",value:function(){var e=this,t=this.props.data.data;return r.a.createElement("span",{className:"hyperlink"},r.a.createElement(T,{title:t.link,direction:"top"},r.a.createElement("button",{onClick:function(){e.jumpTo(t.link)}},t.value)))}}]),t}(a.PureComponent)),Y=(n(65),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.key,n=e.data;return n?r.a.createElement("span",{className:t},n.value):null}}]),t}(a.PureComponent)),G=(n(66),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.data;return r.a.createElement("pre",{className:"code"},e.value)}}]),t}(a.PureComponent)),V=(n(67),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.data;return r.a.createElement("span",{className:"delete"},e.value)}}]),t}(a.PureComponent)),H=(n(68),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("span",{className:"text"},e.content)}}]),t}(a.PureComponent)),B=[],J={TIME:"time",TAG:"tag",TEXT:"text",HYPERLINK:"hyperlink",CODE:"code",ITALIC:"italic",EM:"em",EM_ITALIC:"em-italic",DELETE:"delete"},W="[",X="]",q=">",z=",",Q="(",Z=")",$="`",ee="*",te="~",ne=["[","]",">","`","*","~"],ae={parse:function(e,t){if("string"!==typeof e||0===e.length)return!0!==t&&console.log("\u8f93\u5165\u7684\u6570\u636e\u6709\u8bef\uff0c\u8bf7\u786e\u4fdd\u8f93\u5165\u6e90\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32"),!1;for(var n=(e=e.trim()).length,a=0,r=[],i=-1;a<n;){var o=ae.analyze(e,a);if(o){var c=o.end+1;if(c<=a)a+=1,!0!==t&&console.log("\u89e3\u6790\u9519\u8bef: ".concat(e,", ").concat(a));else{if(-1!==i){var s=ae.getText(e,i,a-1);r.push(s),i=-1}a=c}r.push(o)}else-1===i&&(i=a),a+=1}if(-1!==i){var l=ae.getText(e,i);r.push(l)}return r[0][k.RENDER_STRING_KEY]=oe.getMessage(r),!0!==t&&console.log("txt: ".concat(e,", parseData:"),r),r},analyze:function(e,t){var n=e[t],a=null;if(-1!==ne.indexOf(n))switch(n){case W:a=ae.quoteParse(e,t);break;case q:a=ae.timeParse(e,t);break;case $:a=ae.codeParse(e,t);break;case ee:a=ae.emParse(e,t);break;case te:a=ae.delLineParse(e,t)}return a},getText:function(e,t,n){if("undefined"!==typeof n){var a=e.substring(t,n+1);return{begin:t,end:n,key:J.TEXT,content:a,data:{value:a}}}var r=e.substr(t);return{begin:t,end:e.length-1,key:J.TEXT,content:r,data:{value:r}}},delLineParse:function(e,t){if((e=e.substr(t))[1]!==te)return null;var n=e.indexOf("~~",3);return-1===n?null:{begin:t,end:n+t+1,key:J.DELETE,content:e.substring(0,n+2),data:{value:e.substring(2,n)}}},emParse:function(e,t){var n=0,a=null,r=null,i=null,o=0;(e=e.substr(t))[1]===ee&&(o=e[2]===ee?2:1);var c=-1;switch(o){case 0:-1!==(n=e.indexOf("*",2))&&(c=0);break;case 1:-1===(n=e.indexOf("**",3))?-1!==(n=e.indexOf("*",3))&&(c=0):c=1;break;case 2:-1===(n=e.indexOf("***",4))?-1===(n=e.indexOf("**",4))?-1!==(n=e.indexOf("*",4))&&(c=0):c=1:c=2}if(-1===c)return null;switch(c){case 0:a=J.ITALIC,i=e.substring(1,n),r=e.substring(0,n+1);break;case 1:a=J.EM,i=e.substring(2,n),n+=1,r=e.substring(0,n+1);break;case 2:a=J.EM_ITALIC,i=e.substring(3,n),n+=2,r=e.substring(0,n+1)}return{begin:t,end:n+t,key:a,content:r,data:{value:i}}},codeParse:function(e,t){var n;return-1===(n=(e=e.substr(t)).indexOf($,2))?null:{begin:t,end:n+t,key:J.CODE,content:e.substring(0,n+1),data:{value:e.substring(1,n)}}},quoteParse:function(e,t){e=e.substr(t);var n=0,a=null,r=null,i=J.TAG;if(-1===(n=e.indexOf(X)))return null;a=e.substring(0,n+1);var o=e.substring(1,n);if(e[n+1]===Q){var c=e.indexOf(Z);return-1!==c&&(a=e.substring(0,c+1),i=J.HYPERLINK,r={value:e.substring(1,n),link:e.substring(n+2,c)},n=c),{begin:t,end:n+t,key:i,content:a,data:r}}var s=o.split(z);return{begin:t,end:n+t,key:i,content:a,data:{tags:s=s.map(function(e){return e.trim()}),value:s.join("\u3001")}}},timeParse:function(e,t){var n=(e=e.substr(t)).indexOf(" "),a=e.indexOf(" ",n+1),r=e.substring(1,n);if(-1!==a){var i=e.substring(n+1,a),o=oe.getTimeStamp(r,i);return{begin:t,end:a+t,content:e.substring(0,a),key:J.TIME,data:{delay:r,clock:i,timeStamp:o,value:i}}}if(" "!==e[1]){var c=oe.getTimeStamp(r);return{begin:t,end:n+t,content:e.substring(0,n),key:J.TIME,data:{delay:r,timeStamp:c}}}},test:function(){B.forEach(function(e){ae.parse(e)})}},re={MINUTE:"m",HOURS:"h",DAY:"d",SECOND:"s"},ie=Object.values(re),oe={getTimeStamp:function(e,t){var n=new Date,a=n.getFullYear(),r=n.getMonth(),i=n.getDate(),o=n.getHours(),c=n.getMinutes(),s=n.getSeconds();if(-1!==e.indexOf(":")&&(t=e,e=null),e){var l=e[e.length-1],u=null;if(-1===ie.indexOf(l)){var f=oe.getChineseDay(e);if(Number.isInteger(f)){var h=f-n.getDay();i+=h=h<0?h+7:h}else l=re.DAY,u=e}else u=parseInt(e.substring(0,e.length-1));switch(l){case re.SECOND:s+=u;break;case re.MINUTE:c+=u;break;case re.HOURS:o+=u;break;case re.DAY:default:i+=u}}if(t){var p=t.split(":");if(1===p.length)if(Number.isInteger(p[0]))o=p[0];else{var d=oe.getChineseDay(p[0]);if(Number.isInteger(d)){var v=d-n.getDay();i+=v=v<0?v+7:v}}else o=p[0],c=p[1]}var E=new Date(a,r,i,o,c,s).getTime();return Number.isNaN(E),E},getChineseDay:function(e){switch(e){case"\u661f\u671f\u4e00":case"\u5468\u4e00":return 1;case"\u661f\u671f\u4e8c":case"\u5468\u4e8c":return 2;case"\u661f\u671f\u4e09":case"\u5468\u4e09":return 3;case"\u661f\u671f\u56db":case"\u5468\u56db":return 4;case"\u661f\u671f\u4e94":case"\u5468\u4e94":return 5;case"\u661f\u671f\u516d":case"\u5468\u516d":return 6;case"\u661f\u671f\u5929":case"\u5468\u65e5":return 7;default:return}},getMessage:function(e){var t="";return e.forEach(function(e){var n=e.data;e.key===J.TIME||e.key===J.TAG||(t+=n.value)}),t}};ae.test();var ce=ae,se=(n(31),k.RENDER_PARSE_KEY),le=k.RENDER_ACTIVE_KEY,ue=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i))))._renderLi=function(){var e=n.props,t=e.listData,a=e.index,i=e.checked,o=e.onActive,c=e.onInsertTag,s=t[se],l=t[le];return r.a.createElement("div",{className:v()("message",{"is-active animated tada":l&&!i})},s.map(function(e){var t=e.begin+e.content;switch(e.key){case J.TIME:return r.a.createElement(x,{key:t,index:a,onActive:o,data:e,disabled:i});case J.TAG:return r.a.createElement(U,{key:t,data:e,onDblClick:c});case J.HYPERLINK:return r.a.createElement(F,{key:t,data:e});case J.ITALIC:case J.EM:case J.EM_ITALIC:return r.a.createElement(Y,{key:t,data:e});case J.CODE:return r.a.createElement(G,{key:t,data:e});case J.DELETE:return r.a.createElement(V,{key:t,data:e});case J.TEXT:default:return r.a.createElement(H,{key:t,data:e})}}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.listData,i=t.small,o=t.checked,c=t.storeKey,s=t.className,l=t.onSelect,u=t.onDelete,f=t.draggable,h=!0===a[le]?1:0;return f?r.a.createElement(E.b,{key:a.value+h,index:n,isDragDisabled:!f,draggableId:a.value+n},function(t,a){return r.a.createElement("li",Object.assign({ref:t.innerRef,className:v()("li",s,{checked:o})},t.draggableProps,t.dragHandleProps,{style:(f=a.isDragging,h=t.draggableProps.style,Object(M.a)({userSelect:"none",background:f&&"rgba(255, 255, 255, 0.2)"},h))}),l&&r.a.createElement(K,{small:i,checked:o,onChange:function(e){l(n,e,c)}}),e._renderLi(),u&&r.a.createElement(L,{onClick:function(e){u(n,c,e)}}));var f,h}):r.a.createElement("li",{className:v()("li undo-li",s,{checked:o})},l&&r.a.createElement(K,{small:i,checked:o,onChange:function(e){l(n,e,c)}}),this._renderLi(),u&&r.a.createElement(L,{onClick:function(e){u(n,c,e)}}))}}]),t}(a.PureComponent),fe=(n(107),k.RENDER_PARSE_KEY);function he(e){if(e)return{color:"transparent",background:"rgba(0, 0, 0, .5)",border:"1px solid rgba(255, 255, 255, .8)"}}var pe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},n.handleKeydown=function(e){var t=n.props.onEnter;if(t&&e.nativeEvent.keyCode===C.ENTER){var a=n.refInput.value;n.setState({value:a}),t(a)&&n.handleEmptyInput()}},n.handleEmptyInput=function(){n.props.onChange(""),n.setState({value:""}),n.refInput.value="",n.refInput.focus()},n.handleInputChange=function(e){var t=e.target.value,a=n.props,r=a.max,i=a.onChange;r&&t&&t.length>r&&(I.showTip("\u65e0\u6cd5\u52a0\u8f7d\u66f4\u591a"),t=t.substr(0,r),n.refInput.value=t),n.setState({value:t}),i&&i(t)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.value!==this.state.value&&this.setState({value:e.value},function(){t.refInput.value=e.value,t.refInput.focus()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.className,i=t.focus,o=t.onFocus,c=t.onBlur,l=this.state.value,u=0===l.length,f=ce.parse(l,!0),h=Object(s.a)({},fe,f);return r.a.createElement(E.c,{droppableId:n},function(t,n){return r.a.createElement(r.a.Fragment,null,f&&f.length>=2&&r.a.createElement(ue,{className:v()("input-li",{focus:i}),listData:h}),r.a.createElement("div",{ref:t.innerRef,className:v()("input-wrapper",a,{empty:u,focus:i})},t.placeholder,r.a.createElement("input",{ref:function(t){e.refInput=t},style:he(n.isDraggingOver),placeholder:" Enter \u786e\u8ba4",onFocus:o,onBlur:c,onChange:e.handleInputChange,onKeyPress:e.handleKeydown}),!u&&r.a.createElement(L,{onClick:e.handleEmptyInput})))})}}]),t}(a.PureComponent),de=n(50),ve=k.RENDER_ACTIVE_KEY,Ee=k.RENDER_STRING_KEY,me=function(e){if(0===e.length)return"[]";var t=[];return e.forEach(function(e){var n;t.push((n={value:e.value},Object(s.a)(n,ve,e[ve]),Object(s.a)(n,Ee,e[Ee]),n))}),JSON.stringify(t)},ge=function(e,t){var n=null;try{n=JSON.parse(e)}catch(a){}return n||(n=t),n},be=function(e){return JSON.parse(JSON.stringify(e))},Oe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onActive=function(e){var t=n.props,a=t.storeKey;(0,t.onActive)(e,a)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.list;return t.length!==e.list.length||me(t)!==me(e.list)}},{key:"_renderUndoLi",value:function(e,t){var n=this.props,a=n.small,i=n.checked,o=n.storeKey,c=n.draggable,s=n.onSelect,l=n.onDelete,u=n.onInsertTag;return r.a.createElement(ue,{listData:e,key:e.value,index:t,small:a,checked:i,storeKey:o,draggable:c,onSelect:s,onDelete:l,onActive:this.onActive,onInsertTag:u})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,i=t.className,o=t.list,c=t.enterActive,s=t.leaveActive,l=t.transitionEnter,u=t.transitionLeave;return r.a.createElement(E.c,{droppableId:n},function(t,n){return r.a.createElement("ul",{ref:t.innerRef,className:v()("list",i)},(!o||0===o.length)&&a&&r.a.createElement("div",{key:"place-older",className:"list-holder"},a),r.a.createElement(de.CSSTransitionGroup,{transitionName:{enter:"animated",enterActive:c||"bounceIn",leave:"animated",leaveActive:s||"fadeOutRight"},transitionEnter:l&&!0,transitionLeave:u&&!0,transitionEnterTimeout:300,transitionLeaveTimeout:200},o.map(function(t,n){return e._renderUndoLi(t,n)})),t.placeholder)})}}]),t}(a.Component),ye=(n(118),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.onClick,a=e.onMouseEnter,i=e.onMouseLeave;return r.a.createElement("div",{className:"tool-btn",onMouseEnter:a,onMouseLeave:i,onClick:n},r.a.createElement("i",{className:"iconfont icon-".concat(t)}))}}]),t}(a.PureComponent)),Te=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.children,a=e.onClose;return r.a.createElement("div",{className:v()("tool",{"is-active":t})},t&&n,r.a.createElement(L,{onClick:a}))}}]),t}(a.PureComponent);Te.Btn=ye;n(119);var ke={_fakeClick:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},save:function(e,t){var n=window.URL||window.webkitURL||window,a=new Blob([t]),r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=n.createObjectURL(a),r.download=e,ke._fakeClick(r)},readJson:function(e){return new Promise(function(t,n){var a=new FileReader,r=e.target.files;a.readAsText(r[0]),a.onload=function(e){var a=e.target;if(2===a.readyState)try{var r=JSON.parse(a.result);t(r)}catch(i){n(i)}}})}},Ce=ke,Ne={JSON:"json",TEXT:"text"},je=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.refInput.click()},n.handleRead=function(e){var t=n.props,a=t.type,r=t.onChange;switch(a){case Ne.JSON:Ce.readJson(e).then(function(e){r(e)});break;case Ne.TEXT:}},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.onMouseEnter,i=t.onMouseLeave;return r.a.createElement("div",{className:"upload-wrapper",onMouseEnter:a,onMouseLeave:i,onClick:this.handleClick},r.a.createElement("input",{ref:function(t){return e.refInput=t},className:"read",type:"file",onChange:this.handleRead}),n)}}]),t}(a.PureComponent),De=(n(120),{DEFAULT:{title:"\u9ed1\u591c",className:"black"},WHITE:{title:"\u767d\u663c",className:"white"}}),Ae=Object.keys(De),_e=window.localStorage,Ie="__theme",Re=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={activeTheme:""},n.onChange=function(e,t){t||_e.setItem(Ie,e),n.setState({activeTheme:e}),n.props.onChange(De[e].className)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=_e.getItem(Ie)||"DEFAULT";this.onChange(e,!0)}},{key:"render",value:function(){var e=this,t=this.state.activeTheme;return r.a.createElement("div",{className:"color-theme"},r.a.createElement("span",{className:"color-title"},"\u4e3b\u9898\u8272\uff1a"),Ae.map(function(n){var a=De[n];return r.a.createElement(T,{key:n,title:a.title},r.a.createElement("span",{className:v()("color-block",a.className,{"is-active":t===n}),onClick:function(){e.onChange(n)}}))}))}}],[{key:"getTheme",value:function(){var e=_e.getItem(Ie)||"DEFAULT";return De[e].className}}]),t}(a.PureComponent),Se=(n(121),n(122),{TODO:"TODO",DONE:"DONE",INPUT:"INPUT",CATEGORY:"CATEGORY"}),we=window.localStorage,Pe="slideInDown",Le=k.CATEGORY_LIST,Me=k.LIMIT_WORDS,Ke=k.STORE_TODO_KEY,xe=k.STORE_DONE_KEY,Ue=k.STORE_CATEGORY_KEY,Fe=k.STORE_ACTIVE_CATEGORY_KEY,Ye=k.RENDER_ACTIVE_KEY,Ge=k.RENDER_PARSE_KEY,Ve=k.RENDER_STRING_KEY,He=[Ke,xe],Be=Le[0].key,Je={TEST_PARSER:"\u3010\u89e3\u6790\u6570\u636e\u3011\u89e3\u6790\u8f93\u5165\u6587\u672c\u8017\u65f6\uff1a",ALL_DATA_READ_AND_RENDER:"\u3010\u6240\u6709\u6570\u636e\u3011\u8bfb\u53d6 & \u6e32\u67d3\u8017\u65f6\uff1a",ALL_LIST_READ_AND_RENDER:"\u3010\u5217\u8868\u6570\u636e\u3011\u8bfb\u53d6 & \u6e32\u67d3\u8017\u65f6\uff1a"},We=function(e,t){return"__".concat(e,"_").concat(t)},Xe=function(e){return e===Ke?xe:Ke},qe=function(e){function t(){var e,n,a;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state=(n={},Object(s.a)(n,Ke,[]),Object(s.a)(n,xe,[]),Object(s.a)(n,"focus",!1),Object(s.a)(n,"category",Le),Object(s.a)(n,"categoryKey",Be),Object(s.a)(n,"openTool",!1),Object(s.a)(n,"enableAnimate",!1),Object(s.a)(n,"todoEnterAnimate",""),Object(s.a)(n,"theme",Re.getTheme()),Object(s.a)(n,"insertValue",""),n),a._readData=function(){return new Promise(function(e){console.time(Je.ALL_DATA_READ_AND_RENDER);var t=ge(we.getItem(Ue),Le);we.setItem(Ue,JSON.stringify(t));var n=we.getItem(Fe)||t[0].key;console.time(Je.ALL_LIST_READ_AND_RENDER),a.setState({category:t,categoryKey:n,openTool:!1},function(){a._readList().then(function(){e(),console.timeEnd(Je.ALL_DATA_READ_AND_RENDER),console.timeEnd(Je.ALL_LIST_READ_AND_RENDER)})})})},a._readList=function(){return new Promise(function(e){var t=a.state.categoryKey;He.forEach(function(e){var n=We(t,e),r=ge(we.getItem(n),[]);r.forEach(function(e){e[Ge]||(e[Ge]=ce.parse(e.value),e[Ve]=e[Ge][0][Ve])}),a.setState(Object(s.a)({},e,r))}),e()})},a.insertOneData=function(e,t,n){if(!e||""===e.value)return I.showTip("\u8f93\u5165\u4e0d\u53ef\u4e3a\u7a7a"),!1;var r=a.state.categoryKey,i=a.state[t],o=Object(c.a)(i);e[Ge]||(e[Ge]=ce.parse(e.value)),!0===e[Ye]&&(e[Ye]=!1),e[Ve]||(e[Ve]=e[Ge][0][Ve]);var l=I.getTip(e[Ve],o,!n),u=l.tip,f=l.index;if(u)return I.showTip(u),f>=0&&a.handleActive(f,t,!0),!1;if(!0===n){var h=Xe(t),p=a.state[h],d=I.getTip(e[Ve],p,!0),v=d.tip,E=d.index;if(v)return I.showTip(v),E>=0&&a.handleActive(E,h,!0),!1}o.unshift(e);var m=We(r,t);return we.setItem(m,me(o)),a.setState(Object(s.a)({},t,o)),!0},a.toggleOneData=function(e,t,n){var r=a.state[n],i=Xe(n),o=r[e];a.insertOneData(o,i)&&a.deleteOneData(e,n,!0)},a.deleteOneData=function(e,t,n){var r=a.state.categoryKey,i=a.state[t],o=Object(c.a)(i);o.splice(e,1);var l=We(r,t);we.setItem(l,me(o)),!0!==n&&a.brieflyCloseAnimate(),a.setState(Object(s.a)({},t,o))},a.dragData=function(e,t){var n=a.state.categoryKey;a.setState(Object(s.a)({},t,Object(c.a)(e)));var r=We(n,t);we.setItem(r,me(e))},a.onInsertTag=function(e){var t=a.state.insertValue;-1===t.indexOf("[".concat(e,"]"))?a.setState({insertValue:"[".concat(e,"]").concat(t)}):I.showTip("\u4e0d\u53ef\u6dfb\u52a0\u91cd\u590d\u7684\u6807\u7b7e")},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n){var r=a.state[Ke],i=t.index,o=r[i];switch(n.droppableId){case Se.TODO:var s=Object(c.a)(r),l=n.index;if(i<l)for(var u=i;u<l;u++)s[u]=s[u+1];else if(i>l)for(var f=i;f>l;f--)s[f]=s[f-1];s[l]=o,a.dragData(s,Ke);break;case Se.INPUT:a.setState({insertValue:o.value},function(){a.deleteOneData(i,Ke,!1)})}}},a.handleActive=function(e,t,n){var r=a.state[t],i=be(r),o=i[e];o[Ye]=!0,a.setState(Object(s.a)({},t,Object(c.a)(i))),!0===n&&setTimeout(function(){a.brieflyCloseAnimate();var n=be(o);n[Ye]=!1,i[e]=n,a.setState(Object(s.a)({},t,Object(c.a)(i)))},1e3)},a.brieflyCloseAnimate=function(){a.setState({enableAnimate:!1}),setTimeout(function(){a.setState({enableAnimate:!0})},100)},a.changeCategory=function(e){a.setState({categoryKey:e},function(){we.setItem(Fe,e),a._readList(),a.brieflyCloseAnimate()})},a.handleSave=function(){var e=a.state.category,t={};t.category=e,t.data={},e.forEach(function(e){var n=e.key;He.forEach(function(e){var a=We(n,e);t.data[a]=ge(we.getItem(a),[])})}),Ce.save("config.json",JSON.stringify(t))},a.handleRead=function(e){var t=e.category,n=e.data;we.setItem(Ue,JSON.stringify(t)),Object.keys(n).forEach(function(e){we.setItem(e,me(n[e]))}),a._readData().then(function(){I.showTip("\u8bfb\u53d6\u6210\u529f")})},a.handleInputFocus=function(){a.setState({focus:!0})},a.handleInputBlur=function(){a.setState({focus:!1})},a.handleInputEnter=function(e){return a.insertOneData({value:e},Ke,!0)},a.handleInputChange=function(e){a.setState({insertValue:e})},a.handleToggleTool=function(){var e=a.state.openTool;a.setState({openTool:!e})},a.handleThemeChange=function(e){a.setState({theme:e})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._readData().then(this.brieflyCloseAnimate)}},{key:"__testRender",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.focus,n=e.category,a=e.categoryKey,i=e.openTool,o=e.enableAnimate,c=e.todoEnterAnimate,s=e.theme,l=e.insertValue,u=this.state[Ke],f=this.state[xe],h=document.querySelector("body").clientWidth<=310;return r.a.createElement(E.a,{onDragEnd:this.onDragEnd},r.a.createElement("div",{id:"todo-app",className:v()("theme-".concat(s),{"is-small":h}),tabIndex:"0"},r.a.createElement("div",{className:v()("app-wrapper",{"open-tool":i})},r.a.createElement(I,null),r.a.createElement(P,{length:u.length,onClick:this.handleToggleTool,isActive:i}),r.a.createElement("div",{className:v()("list-container",{focus:t})},r.a.createElement(Oe,{id:Se.TODO,storeKey:Ke,className:v()("undo-list"),list:u,checked:!1,placeholder:"\u4e0d\u6765\u4e00\u53d1\u5417?",enterActive:c,transitionEnter:o,transitionLeave:!1,draggable:!0,onSelect:this.toggleOneData,onDelete:this.deleteOneData,onActive:this.handleActive,onInsertTag:this.onInsertTag}),f.length>0&&r.a.createElement("div",{className:"done-split"}),r.a.createElement(Oe,{id:Se.DONE,storeKey:xe,className:v()("done-list"),checked:!0,small:!0,list:f,enterActive:Pe,transitionEnter:!1,transitionLeave:!1,onSelect:this.toggleOneData,onDelete:this.deleteOneData,onInsertTag:this.onInsertTag})),r.a.createElement(A,{activeKey:a,options:n,onChange:this.changeCategory}),r.a.createElement(pe,{id:Se.INPUT,value:l,focus:!!t,max:Me,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onEnter:this.handleInputEnter,onChange:this.handleInputChange})),r.a.createElement(Te,{isActive:i,onClose:this.handleToggleTool},r.a.createElement(T,{title:"\u5bfc\u51fa\u914d\u7f6e"},r.a.createElement(ye,{type:"download",onClick:this.handleSave})),r.a.createElement(T,{title:"\u5bfc\u5165\u914d\u7f6e"},r.a.createElement(je,{type:Ne.JSON,onChange:this.handleRead},r.a.createElement(ye,{type:"upload"}))),r.a.createElement(Re,{onChange:this.handleThemeChange}))))}}]),t}(a.PureComponent);n(123),n(124),n(125);o.a.render(r.a.createElement(qe,null),document.getElementById("root"))},31:function(e,t,n){},51:function(e,t,n){e.exports=n(126)},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.4ea8aa00.chunk.js.map