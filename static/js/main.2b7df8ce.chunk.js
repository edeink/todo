(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),c=n(9),s=n(7),l=n(1),u=n(2),f=n(4),p=n(3),h=n(5),d=n(6),E=n.n(d),v=(n(56),n(57),null),m=null,b=function(){var e=document.createElement("div");return e.className="tool-tip",e},g=function(){return m||(m=document.querySelector("body"))},O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={left:0,top:0},n.adjustUI=function(){var e=n.props,t=e.y,a=e.target,r=n.refContent.clientWidth,o=parseInt(r),i=a.getBoundingClientRect(),c=i.left+i.width/2-o/2,s=Math.max(t+10,i.bottom+10);n.setState({left:c,top:s})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.adjustUI()}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.state,a=n.left,o=n.top;return r.a.createElement("div",{className:"content",ref:function(t){return e.refContent=t},style:{left:a,top:o}},t)}}]),t}(a.PureComponent),y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleMouseEnter=function(e){var t=e.pageX,a=e.pageY,o=e.currentTarget,c=n.props.title;if(!c||""===c)return!1;v||(v=b()),m||(m=g()),m.appendChild(v),i.a.render(r.a.createElement(O,{x:t,y:a,title:c,target:o}),v)},n.handleMouseLeave=function(e){v&&m&&(i.a.unmountComponentAtNode(v),m.removeChild(v))},n.handleClick=function(e){var t=n.props,a=t.onClick,r=t.children;a?a(e):"object"===typeof r&&r.props.onClick&&r.props.onClick()},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.children;"object"!==typeof e&&(e=r.a.createElement("span",null,e));var t={onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick};return r.a.cloneElement(e,t)}}]),t}(a.PureComponent),T={LIMIT_WORDS:100,CATEGORY_LIST:[{key:"default",value:"\u9ed8\u8ba4"}],STORE_CATEGORY_KEY:"__category",STORE_TODO_KEY:"__todoList",STORE_DONE_KEY:"__doneList",RENDER_PARSE_KEY:"__parseData",RENDER_ACTIVE_KEY:"__active",RENDER_STRING_KEY:"__string"},k={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,Pause:19,CAPE_LOCK:20,ESC:27,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,SELECT:41,PRINT:42,EXECUTE:43,UNDEFINED:44,INSERT:45,DELETE:46,Help:47,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META_LEFT:91,META_RIGHT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145,EQUAL:187,PERIOD:188,MINUS:189,COMMA:190,LEFT_PARENTHESIS:219,RIGHT_PARENTHESIS:221},j=window.localStorage,N=T.STORE_CATEGORY_KEY,C=":d",A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(p.a)(t).call(this,e))).onClick=function(e){n.props.onChange(e)},n.onKeyDown=function(e){if(e.nativeEvent.keyCode===k.ENTER){var t=n.state.focusKey;n.onBlur(t)}},n.onFocus=function(e,t,a){n._preValue=t,n.setState({focusKey:e,focusValue:t,focusIndex:a})},n.deleteOption=function(e){var t=n.state.options;t.splice(e,1),n.setState({options:Object(c.a)(t)}),j.setItem(N,JSON.stringify(t))},n.onBlur=function(e){var t=n.state,a=t.focusIndex,r=t.focusKey,o=t.focusValue,i=t.options;e===r&&n.setState({focusIndex:-1,focusValue:"",focusKey:null});var c=i[a];return o?o===C?(n.deleteOption(a),!1):(!0===c.isNew?c={key:o,value:o}:c.value=o,i[a]=c,j.setItem(N,JSON.stringify(i)),void n.props.onChange(e)):(!0===c.isNew&&n.deleteOption(a),!1)},n.onValueChange=function(e){n.setState({focusValue:e.target.value})},n.addEmptyCategory=function(){var e=n.state.options,t=Object(c.a)(e),a=""+Math.random(),r={key:a,value:"",isNew:!0};t.push(r),n.setState({focusIndex:e.length,focusKey:a,options:t})},n.state={focusIndex:-1,focusKey:null,options:e.options,focusValue:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&this.setState({options:e.options})}},{key:"_renderEachCategory",value:function(e,t,n){var a=this,o=this.state,i=o.focusKey,c=o.focusValue,s=this.props.activeKey,l=e===i;return r.a.createElement("li",{key:e,className:E()({"is-active":e===s,"is-focus":l}),onDoubleClick:function(){a.onFocus(e,t,n)},onClick:function(){a.onClick(e)}},l?r.a.createElement("input",{autoFocus:!0,className:"category-input",value:c,onBlur:function(){a.onBlur(e)},onKeyPress:this.onKeyDown,onChange:this.onValueChange}):r.a.createElement("span",null,t))}},{key:"render",value:function(){var e=this,t=this.state.options;return r.a.createElement("div",{className:"todo-category"},r.a.createElement("ul",null,t.map(function(t,n){var a=t.key,r=t.value;return e._renderEachCategory(a,r,n)}),r.a.createElement("li",{className:"add-category",onClick:this.addEmptyCategory},r.a.createElement(y,{title:"\u6dfb\u52a0\u5206\u7c7b"},r.a.createElement("i",{className:"iconfont icon-plus"})))))}}]),t}(a.PureComponent),D={TYPE:{TIP:"tip"},stop:function(e){e.stopPropagation(),e.preventDefault()},dispatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=document.createEvent("CustomEvent");r.initCustomEvent(e,n,a,t),window.dispatchEvent(r)}},_=(n(58),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={tip:"",active:!1},n._showTip=function(e){var t=n.props.duration,a=e.detail,r=a.tip,o=a.timeout;n.tipsTimout&&(clearTimeout(n.tipsTimout),n.tipsTimout=null),n.setState({tip:r,active:!0}),n.tipsTimout=setTimeout(function(){n.setState({active:!1})},o||t||2e3)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener(D.TYPE.TIP,this._showTip)}},{key:"componentWillUnmount",value:function(){window.addEventListener(D.TYPE.TIP,this._showTip)}},{key:"render",value:function(){var e=this.state,t=e.tip,n=e.active;return t?r.a.createElement("div",{className:E()("tips",{"is-active":n})},"".concat(t)):null}}],[{key:"getTip",value:function(e,t,n){var a=e.length,r=-1,o=T.RENDER_STRING_KEY;if(t.some(function(t,n){return t[o]===e&&(r=n,!0)}),!0!==n){if(0===a)return{tip:"\u54c8\u54c8\u54c8\uff0c\u5c0f\u54d1\u5df4\uff01"};if(t.length>=9)return{tip:"\u88c5\u4e0d\u4e0b\u5566\uff0c\u5feb\u53bb\u5e72\u6d3b\uff01"}}return-1!==r?{index:r,tip:"\u4f60\u5df2\u7ecf\u8bf4\u8fc7\u5566\uff01\u771f\u5570\u55e6~"}:{tip:""}}}]),t}(a.PureComponent));_.showTip=function(e,t){D.dispatch(D.TYPE.TIP,{tip:e,timeout:t})};n(59);var I="good",S="ok",R="busy",w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.length,n=e.isActive,a=e.onClick,o=e.onMouseEnter,i=e.onMouseLeave,c=t<=2?I:t<=5?S:R;return r.a.createElement("div",{className:E()("status",c,{"is-active":n}),onMouseEnter:o,onMouseLeave:i,onClick:a})}}]),t}(a.PureComponent),P=(n(60),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){n.props.onClick(e)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.className;return r.a.createElement("button",{className:E()("cross","close-btn",e),onClick:this.onClick})}}]),t}(a.PureComponent)),L=n(45),M=n(13),K=(n(61),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).toggleChecked=function(){var e=n.props,t=e.onChange,a=e.checked;t&&t(!a)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.small;return r.a.createElement("div",{className:E()("checkbox",{checked:t,small:n}),onClick:this.toggleChecked})}}]),t}(a.PureComponent));n(62);var x=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.data,a=t.disabled,r=t.onActive;if(n&&r&&!a){var o=n.data,i=Date.now(),c=o.timeStamp-i;c<=0?this.notify():this.timeoutKey=setTimeout(function(){e.notify()},c)}}},{key:"componentWillUnmount",value:function(){this.timeoutKey&&clearTimeout(this.timeoutKey)}},{key:"notify",value:function(){var e,t,n=this.props,a=n.index,r=n.data,o=n.onActive;e="\u4eb2\uff0c\u4f60\u8fd8\u6709\u4e8b\u4ef6\u6ca1\u505a\u54e6",t=r[T.RENDER_STRING_KEY],console.log("\u901a\u77e5\uff1a",e,t),new Notification(e,{body:t}),o(a)}},{key:"render",value:function(){var e=this.props.data.data,t=new Date(e.timeStamp).toLocaleString();return r.a.createElement("span",{className:"time"},r.a.createElement(y,{title:t},r.a.createElement("i",{className:"iconfont icon-time-circle"})))}}]),t}(a.Component),F=(n(63),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.data;return e&&Array(e.tags)&&0!==e.tags.length?r.a.createElement("span",{className:"tags"},e.tags.map(function(e){return r.a.createElement("span",{className:"tag",key:e},e)})):null}}]),t}(a.PureComponent)),U=(n(64),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"jumpTo",value:function(e){var t=e;e.startsWith("http")||(t="https://".concat(e)),function(e,t){try{window.require("electron").shell.openExternal(e)}catch(n){try{window.open(e,"_blank")}catch(n){t&&t()}}}(t,function(){_.showTip('"'.concat(e,'" \u4e0d\u662f\u5408\u6cd5Url'))})}},{key:"render",value:function(){var e=this,t=this.props.data.data;return r.a.createElement("span",{className:"hyperlink"},r.a.createElement(y,{title:t.link,direction:"top"},r.a.createElement("button",{onClick:function(){e.jumpTo(t.link)}},t.value)))}}]),t}(a.PureComponent)),Y=(n(65),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.key,n=e.data;return n?r.a.createElement("span",{className:t},n.value):null}}]),t}(a.PureComponent)),G=(n(66),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.data;return r.a.createElement("pre",{className:"code"},e)}}]),t}(a.PureComponent)),H=(n(67),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.data;return r.a.createElement("span",{className:"delete"},e)}}]),t}(a.PureComponent)),B=(n(68),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("span",{className:"text"},e.content)}}]),t}(a.PureComponent)),J=[],V={TIME:"time",TAG:"tag",TEXT:"text",HYPERLINK:"hyperlink",CODE:"code",ITALIC:"italic",EM:"em",EM_ITALIC:"em-italic",DELETE:"delete"},W="[",X="]",q=">",z=",",Q="(",Z=")",$="`",ee="*",te="~",ne=["[","]",">","`","*","~"],ae={parse:function(e,t){if("string"!==typeof e||0===e.length)return!0!==t&&console.log("\u8f93\u5165\u7684\u6570\u636e\u6709\u8bef\uff0c\u8bf7\u786e\u4fdd\u8f93\u5165\u6e90\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32"),!1;for(var n=(e=e.trim()).length,a=0,r=[],o=-1;a<n;){var i=ae.analyze(e,a);if(i){var c=i.end+1;if(c<=a)a+=1,!0!==t&&console.log("\u89e3\u6790\u9519\u8bef: ".concat(e,", ").concat(a));else{if(-1!==o){var s=ae.getText(e,o,a-1);r.push(s),o=-1}a=c}r.push(i)}else-1===o&&(o=a),a+=1}if(-1!==o){var l=ae.getText(e,o);r.push(l)}return r[0][T.RENDER_STRING_KEY]=ie.getMessage(r),!0!==t&&console.log("txt: ".concat(e,", parseData:"),r),r},analyze:function(e,t){var n=e[t],a=null;if(-1!==ne.indexOf(n))switch(n){case W:a=ae.quoteParse(e,t);break;case q:a=ae.timeParse(e,t);break;case $:a=ae.codeParse(e,t);break;case ee:a=ae.emParse(e,t);break;case te:a=ae.delLineParse(e,t)}return a},getText:function(e,t,n){if("undefined"!==typeof n){var a=e.substring(t,n+1);return{begin:t,end:n,key:V.TEXT,content:a,data:{value:a}}}var r=e.substr(t);return{begin:t,end:e.length-1,key:V.TEXT,content:r,data:{value:r}}},delLineParse:function(e,t){if((e=e.substr(t))[1]!==te)return null;var n=e.indexOf("~~",3);return-1===n?null:{begin:t,end:n+t+1,key:V.DELETE,content:e.substring(0,n+2),data:{value:e.substring(2,n)}}},emParse:function(e,t){var n=0,a=null,r=null,o=null,i=0;(e=e.substr(t))[1]===ee&&(i=e[2]===ee?2:1);var c=-1;switch(i){case 0:-1!==(n=e.indexOf("*",2))&&(c=0);break;case 1:-1===(n=e.indexOf("**",3))?-1!==(n=e.indexOf("*",3))&&(c=0):c=1;break;case 2:-1===(n=e.indexOf("***",4))?-1===(n=e.indexOf("**",4))?-1!==(n=e.indexOf("*",4))&&(c=0):c=1:c=2}if(-1===c)return null;switch(c){case 0:a=V.ITALIC,o=e.substring(1,n),r=e.substring(0,n+1);break;case 1:a=V.EM,o=e.substring(2,n),n+=1,r=e.substring(0,n+1);break;case 2:a=V.EM_ITALIC,o=e.substring(3,n),n+=2,r=e.substring(0,n+1)}return{begin:t,end:n+t,key:a,content:r,data:{value:o}}},codeParse:function(e,t){var n;return-1===(n=(e=e.substr(t)).indexOf($,2))?null:{begin:t,end:n+t,key:V.CODE,content:e.substring(0,n+1),data:{value:e.substring(1,n)}}},quoteParse:function(e,t){e=e.substr(t);var n=0,a=null,r=null,o=V.TAG;if(-1===(n=e.indexOf(X)))return null;a=e.substring(0,n+1);var i=e.substring(1,n);if(e[n+1]===Q){var c=e.indexOf(Z);return-1!==c&&(a=e.substring(0,c+1),o=V.HYPERLINK,r={value:e.substring(1,n),link:e.substring(n+2,c)},n=c),{begin:t,end:n+t,key:o,content:a,data:r}}var s=i.split(z);return{begin:t,end:n+t,key:o,content:a,data:{tags:s=s.map(function(e){return e.trim()}),value:s.join("\u3001")}}},timeParse:function(e,t){var n=(e=e.substr(t)).indexOf(" "),a=e.indexOf(" ",n+1),r=e.substring(t+1,n);if(-1!==a){var o=e.substring(n+1,a),i=ie.getTimeStamp(r,o);return{begin:t,end:a+t,content:e.substring(0,a),key:V.TIME,data:{delay:r,clock:o,timeStamp:i,value:o}}}if(" "!==e[1]){var c=ie.getTimeStamp(r);return{begin:t,end:n+t,content:e.substring(0,n),key:V.TIME,data:{delay:r,timeStamp:c}}}},test:function(){J.forEach(function(e){ae.parse(e)})}},re={MINUTE:"m",HOURS:"h",DAY:"d",SECOND:"s"},oe=Object.values(re),ie={getTimeStamp:function(e,t){var n=new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),i=n.getHours(),c=n.getMinutes(),s=n.getSeconds();if(e){var l=e[e.length-1],u=null;switch(-1===oe.indexOf(l)?(l=re.DAY,u=e):u=parseInt(e.substring(0,e.length-1)),l){case re.SECOND:s+=u;break;case re.MINUTE:c+=u;break;case re.HOURS:i+=u;break;case re.DAY:default:o+=u}}if(t){var f=t.split(":");i=f[0],c=f[1]}return new Date(a,r,o,i,c,s).getTime()},getMessage:function(e){var t="";return e.forEach(function(e){var n=e.data;e.key===V.TIME||e.key===V.TAG||(t+=n.value)}),t}};ae.test();var ce=ae,se=(n(31),T.RENDER_PARSE_KEY),le=T.RENDER_ACTIVE_KEY,ue=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o))))._renderLi=function(){var e=n.props,t=e.listData,a=e.index,o=e.checked,i=e.onActive,c=t[se],s=t[le];return r.a.createElement("div",{className:E()("message",{"is-active animated tada":s&&!o})},c.map(function(e){var t=e.begin+e.content;switch(e.key){case V.TIME:return r.a.createElement(x,{key:t,index:a,onActive:i,data:e,disabled:o});case V.TAG:return r.a.createElement(F,{key:t,data:e});case V.HYPERLINK:return r.a.createElement(U,{key:t,data:e});case V.ITALIC:case V.EM:case V.EM_ITALIC:return r.a.createElement(Y,{key:t,data:e});case V.CODE:return r.a.createElement(G,{key:t,data:e});case V.DELETE:return r.a.createElement(H,{key:t,data:e});case V.TEXT:default:return r.a.createElement(B,{key:t,data:e})}}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.listData,o=t.small,i=t.checked,c=t.storeKey,s=t.className,l=t.onSelect,u=t.onDelete,f=t.onDrag,p=!0===a[le]?1:0;return f?r.a.createElement(M.b,{key:a.value+p,index:n,isDragDisabled:!f,draggableId:a.value+n},function(t,a){return r.a.createElement("li",Object.assign({ref:t.innerRef,className:E()("li",s,{checked:i})},t.draggableProps,t.dragHandleProps,{style:(f=a.isDragging,p=t.draggableProps.style,Object(L.a)({userSelect:"none",background:f&&"rgba(255, 255, 255, 0.2)"},p))}),l&&r.a.createElement(K,{small:o,checked:i,onChange:function(e){l(n,e,c)}}),e._renderLi(),u&&r.a.createElement(P,{onClick:function(e){u(n,c,e)}}));var f,p}):r.a.createElement("li",{className:E()("li undo-li",s,{checked:i})},l&&r.a.createElement(K,{small:o,checked:i,onChange:function(e){l(n,e,c)}}),this._renderLi(),u&&r.a.createElement(P,{onClick:function(e){u(n,c,e)}}))}}]),t}(a.PureComponent),fe=(n(107),T.RENDER_PARSE_KEY),pe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},n.handleKeydown=function(e){var t=n.props.onEnter;if(t&&e.nativeEvent.keyCode===k.ENTER){var a=n.refInput.value;n.setState({value:a}),t(a)&&n.handleEmptyInput()}},n.handleEmptyInput=function(){n.setState({value:""}),n.refInput.value="",n.refInput.focus()},n.handleInputChange=function(e){var t=e.target.value,a=n.props,r=a.max,o=a.onChange;r&&t&&t.length>r&&(_.showTip("\u65e0\u6cd5\u52a0\u8f7d\u66f4\u591a"),t=t.substr(0,r),n.refInput.value=t),n.setState({value:t}),o&&o(t)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.focus,o=t.onFocus,i=t.onBlur,c=this.state.value,l=0===c.length,u=ce.parse(c,!0),f=Object(s.a)({},fe,u);return r.a.createElement(r.a.Fragment,null,u&&u.length>=2&&r.a.createElement(ue,{className:"input-li",listData:f}),r.a.createElement("div",{className:E()("input-wrapper",n,{empty:l,focus:a})},r.a.createElement("input",{ref:function(t){e.refInput=t},placeholder:" Enter \u786e\u8ba4",onFocus:o,onBlur:i,onChange:this.handleInputChange,onKeyPress:this.handleKeydown}),!l&&r.a.createElement(P,{onClick:this.handleEmptyInput})))}}]),t}(a.PureComponent),he=n(50),de=T.RENDER_ACTIVE_KEY,Ee=T.RENDER_STRING_KEY,ve=function(e){if(0===e.length)return"[]";var t=[];return e.forEach(function(e){var n;t.push((n={value:e.value},Object(s.a)(n,de,e[de]),Object(s.a)(n,Ee,e[Ee]),n))}),JSON.stringify(t)},me=function(e,t){var n=null;try{n=JSON.parse(e)}catch(a){}return n||(n=t),n},be=function(e){return JSON.parse(JSON.stringify(e))},ge=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t=n.props,a=t.list,r=t.storeKey,o=t.onDrag,i=Object(c.a)(a),s=e.source,l=e.destination;if(o&&l){var u=s.index,f=l.index,p=i[u];if(u<f)for(var h=u;h<f;h++)i[h]=i[h+1];else if(u>f)for(var d=u;d>f;d--)i[d]=i[d-1];i[f]=p,o(i,r)}},n.onActive=function(e){var t=n.props,a=t.storeKey;(0,t.onActive)(e,a)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.list;return t.length!==e.list.length||ve(t)!==ve(e.list)}},{key:"_renderUndoLi",value:function(e,t){var n=this.props,a=n.small,o=n.checked,i=n.storeKey,c=n.onSelect,s=n.onDelete,l=n.onDrag;return r.a.createElement(ue,{listData:e,key:e.value,index:t,small:a,checked:o,storeKey:i,onSelect:c,onDelete:s,onDrag:l,onActive:this.onActive})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,o=t.className,i=t.list,c=t.enterActive,s=t.leaveActive,l=t.transitionEnter,u=t.transitionLeave;return r.a.createElement(M.a,{onDragEnd:this.onDragEnd},r.a.createElement(M.c,{droppableId:n},function(t,n){return r.a.createElement("ul",{ref:t.innerRef,style:void n.isDraggingOver,className:E()("list",o)},(!i||0===i.length)&&a&&r.a.createElement("div",{key:"place-older",className:"list-holder"},a),r.a.createElement(he.CSSTransitionGroup,{transitionName:{enter:"animated",enterActive:c||"bounceIn",leave:"animated",leaveActive:s||"fadeOutRight"},transitionEnter:l&&!0,transitionLeave:u&&!0,transitionEnterTimeout:300,transitionLeaveTimeout:200},i.map(function(t,n){return e._renderUndoLi(t,n)})),t.placeholder)}))}}]),t}(a.Component),Oe=(n(118),function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.onClick,a=e.onMouseEnter,o=e.onMouseLeave;return r.a.createElement("div",{className:"tool-btn",onMouseEnter:a,onMouseLeave:o,onClick:n},r.a.createElement("i",{className:"iconfont icon-".concat(t)}))}}]),t}(a.PureComponent)),ye=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.children,a=e.onClose;return r.a.createElement("div",{className:E()("tool",{"is-active":t})},t&&n,r.a.createElement(P,{onClick:a}))}}]),t}(a.PureComponent);ye.Btn=Oe;n(119);var Te={_fakeClick:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},save:function(e,t){var n=window.URL||window.webkitURL||window,a=new Blob([t]),r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=n.createObjectURL(a),r.download=e,Te._fakeClick(r)},readJson:function(e){return new Promise(function(t,n){var a=new FileReader,r=e.target.files;a.readAsText(r[0]),a.onload=function(e){var a=e.target;if(2===a.readyState)try{var r=JSON.parse(a.result);t(r)}catch(o){n(o)}}})}},ke=Te,je={JSON:"json",TEXT:"text"},Ne=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.refInput.click()},n.handleRead=function(e){var t=n.props,a=t.type,r=t.onChange;switch(a){case je.JSON:ke.readJson(e).then(function(e){r(e)});break;case je.TEXT:}},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.onMouseEnter,o=t.onMouseLeave;return r.a.createElement("div",{className:"upload-wrapper",onMouseEnter:a,onMouseLeave:o,onClick:this.handleClick},r.a.createElement("input",{ref:function(t){return e.refInput=t},className:"read",type:"file",onChange:this.handleRead}),n)}}]),t}(a.PureComponent),Ce=(n(120),{DEFAULT:{title:"\u9ed1\u591c",className:"black"},WHITE:{title:"\u767d\u663c",className:"white"}}),Ae=Object.keys(Ce),De=window.localStorage,_e="__theme",Ie=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={activeTheme:""},n.onChange=function(e,t){t||De.setItem(_e,e),n.setState({activeTheme:e}),n.props.onChange(Ce[e].className)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=De.getItem(_e)||"DEFAULT";this.onChange(e,!0)}},{key:"render",value:function(){var e=this,t=this.state.activeTheme;return r.a.createElement("div",{className:"color-theme"},r.a.createElement("span",{className:"color-title"},"\u4e3b\u9898\u8272\uff1a"),Ae.map(function(n){var a=Ce[n];return r.a.createElement(y,{key:n,title:a.title},r.a.createElement("span",{className:E()("color-block",a.className,{"is-active":t===n}),onClick:function(){e.onChange(n)}}))}))}}],[{key:"getTheme",value:function(){var e=De.getItem(_e)||"DEFAULT";return Ce[e].className}}]),t}(a.PureComponent),Se=(n(121),n(122),window.localStorage),Re="slideInDown",we=T.CATEGORY_LIST,Pe=T.LIMIT_WORDS,Le=T.STORE_TODO_KEY,Me=T.STORE_DONE_KEY,Ke=T.STORE_CATEGORY_KEY,xe=T.RENDER_ACTIVE_KEY,Fe=T.RENDER_PARSE_KEY,Ue=T.RENDER_STRING_KEY,Ye=[Le,Me],Ge=we[0].key,He={TEST_PARSER:"\u3010\u89e3\u6790\u6570\u636e\u3011\u89e3\u6790\u8f93\u5165\u6587\u672c\u8017\u65f6\uff1a",ALL_DATA_READ_AND_RENDER:"\u3010\u6240\u6709\u6570\u636e\u3011\u8bfb\u53d6 & \u6e32\u67d3\u8017\u65f6\uff1a",ALL_LIST_READ_AND_RENDER:"\u3010\u5217\u8868\u6570\u636e\u3011\u8bfb\u53d6 & \u6e32\u67d3\u8017\u65f6\uff1a"},Be=function(e,t){return"__".concat(e,"_").concat(t)},Je=function(e){return e===Le?Me:Le},Ve=function(e){function t(){var e,n,a;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state=(n={},Object(s.a)(n,Le,[]),Object(s.a)(n,Me,[]),Object(s.a)(n,"focus",!1),Object(s.a)(n,"category",we),Object(s.a)(n,"categoryKey",Ge),Object(s.a)(n,"openTool",!1),Object(s.a)(n,"enableAnimate",!1),Object(s.a)(n,"todoEnterAnimate",""),Object(s.a)(n,"theme",Ie.getTheme()),n),a._readData=function(){return new Promise(function(e){console.time(He.ALL_DATA_READ_AND_RENDER);var t=me(Se.getItem(Ke),we);Se.setItem(Ke,JSON.stringify(t));var n=t[0].key;console.time(He.ALL_LIST_READ_AND_RENDER),a.setState({category:t,categoryKey:n,openTool:!1},function(){a._readList().then(function(){e(),console.timeEnd(He.ALL_DATA_READ_AND_RENDER),console.timeEnd(He.ALL_LIST_READ_AND_RENDER)})})})},a._readList=function(){return new Promise(function(e){var t=a.state.categoryKey;Ye.forEach(function(e){var n=Be(t,e),r=me(Se.getItem(n),[]);r.forEach(function(e){e[Fe]||(e[Fe]=ce.parse(e.value),e[Ue]=e[Fe][0][Ue])}),a.setState(Object(s.a)({},e,r))}),e()})},a.insertOneData=function(e,t,n){if(!e||""===e.value)return _.showTip("\u8f93\u5165\u4e0d\u53ef\u4e3a\u7a7a"),!1;var r=a.state.categoryKey,o=a.state[t],i=Object(c.a)(o);e[Fe]||(e[Fe]=ce.parse(e.value)),!0===e[xe]&&(e[xe]=!1),e[Ue]||(e[Ue]=e[Fe][0][Ue]);var l=_.getTip(e[Ue],i,!n),u=l.tip,f=l.index;if(u)return _.showTip(u),f>=0&&a.handleActive(f,t,!0),!1;if(!0===n){var p=Je(t),h=a.state[p],d=_.getTip(e[Ue],h,!0),E=d.tip,v=d.index;if(E)return _.showTip(E),v>=0&&a.handleActive(v,p,!0),!1}i.unshift(e);var m=Be(r,t);return Se.setItem(m,ve(i)),a.setState(Object(s.a)({},t,i)),!0},a.toggleOneData=function(e,t,n){var r=a.state[n],o=Je(n),i=r[e];a.insertOneData(i,o)&&a.deleteOneData(e,n,!0)},a.deleteOneData=function(e,t,n){var r=a.state.categoryKey,o=a.state[t],i=Object(c.a)(o);i.splice(e,1);var l=Be(r,t);Se.setItem(l,ve(i)),!0!==n&&a.brieflyCloseAnimate(),a.setState(Object(s.a)({},t,i))},a.dragData=function(e,t){var n=a.state.categoryKey;a.setState(Object(s.a)({},t,Object(c.a)(e)));var r=Be(n,t);Se.setItem(r,ve(e))},a.handleActive=function(e,t,n){var r=a.state[t],o=be(r),i=o[e];i[xe]=!0,a.setState(Object(s.a)({},t,Object(c.a)(o))),!0===n&&setTimeout(function(){a.brieflyCloseAnimate();var n=be(i);n[xe]=!1,o[e]=n,a.setState(Object(s.a)({},t,Object(c.a)(o)))},1e3)},a.brieflyCloseAnimate=function(){a.setState({enableAnimate:!1}),setTimeout(function(){a.setState({enableAnimate:!0})},100)},a.changeCategory=function(e){a.setState({categoryKey:e},function(){a._readList(),a.brieflyCloseAnimate()})},a.handleSave=function(){var e=a.state.category,t={};t.category=e,t.data={},e.forEach(function(e){var n=e.key;Ye.forEach(function(e){var a=Be(n,e);t.data[a]=me(Se.getItem(a),[])})}),ke.save("config.json",JSON.stringify(t))},a.handleRead=function(e){var t=e.category,n=e.data;Se.setItem(Ke,JSON.stringify(t)),Object.keys(n).forEach(function(e){Se.setItem(e,ve(n[e]))}),a._readData().then(function(){_.showTip("\u8bfb\u53d6\u6210\u529f")})},a.handleInputFocus=function(){a.setState({focus:!0})},a.handleInputBlur=function(){a.setState({focus:!1})},a.handleInputEnter=function(e){return a.insertOneData({value:e},Le,!0)},a.handleToggleTool=function(){var e=a.state.openTool;a.setState({openTool:!e})},a.handleThemeChange=function(e){a.setState({theme:e})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._readData().then(this.brieflyCloseAnimate)}},{key:"__testRender",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.focus,n=e.category,a=e.categoryKey,o=e.openTool,i=e.enableAnimate,c=e.todoEnterAnimate,s=e.theme,l=this.state[Le],u=this.state[Me],f=document.querySelector("body").clientWidth<=310;return r.a.createElement("div",{id:"todo-app",className:E()("theme-".concat(s),{"is-small":f}),tabIndex:"0"},r.a.createElement("div",{className:E()("app-wrapper",{"open-tool":o})},r.a.createElement(A,{activeKey:a,options:n,onChange:this.changeCategory}),r.a.createElement(_,null),r.a.createElement(w,{length:l.length,onClick:this.handleToggleTool,isActive:o}),r.a.createElement("div",{className:E()("list-container",{focus:t})},r.a.createElement(ge,{id:"undo",storeKey:Le,className:E()("undo-list"),list:l,checked:!1,placeholder:"\u4e0d\u6765\u4e00\u53d1\u5417?",enterActive:c,transitionEnter:i,transitionLeave:!1,onSelect:this.toggleOneData,onDelete:this.deleteOneData,onDrag:this.dragData,onActive:this.handleActive}),u.length>0&&r.a.createElement("div",{className:"done-split"}),r.a.createElement(ge,{id:"done",storeKey:Me,className:E()("done-list"),checked:!0,small:!0,list:u,enterActive:Re,transitionEnter:!1,transitionLeave:!1,onSelect:this.toggleOneData,onDelete:this.deleteOneData})),r.a.createElement(pe,{focus:!!t,max:Pe,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onEnter:this.handleInputEnter})),r.a.createElement(ye,{isActive:o,onClose:this.handleToggleTool},r.a.createElement(y,{title:"\u5bfc\u51fa\u914d\u7f6e"},r.a.createElement(Oe,{type:"download",onClick:this.handleSave})),r.a.createElement(y,{title:"\u5bfc\u5165\u914d\u7f6e"},r.a.createElement(Ne,{type:je.JSON,onChange:this.handleRead},r.a.createElement(Oe,{type:"upload"}))),r.a.createElement(Ie,{onChange:this.handleThemeChange})))}}]),t}(a.PureComponent);n(123),n(124),n(125);i.a.render(r.a.createElement(Ve,null),document.getElementById("root"))},31:function(e,t,n){},51:function(e,t,n){e.exports=n(126)},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.2b7df8ce.chunk.js.map